# send notifications to telegram group on commits, releases, issues
name: notifications

on:
  pull_request:
    branches:
      - master
  push:
    branches:
      - master

jobs:
  push:
    # https://docs.github.com/en/rest/overview/github-event-types?apiVersion=2022-11-28#pushevent
    # if: ${{ github.event.type == 'PushEvent' }}
    runs-on: ubuntu-latest
    steps:
    - run: echo ${{ github.action }}
    - run: echo ${{ github.event_name }}

    # @plebbit telegram chat id is -1001792656766
    - name: "telegram notifications"
      uses: appleboy/telegram-action@master
      with:
        to: 1986059725
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          ${{ github.event.commits[0].message }}
          ${{ github.event.commits[0].author.name }}

          by ${{ github.actor }} in ${{ github.action_repository }}
          ${{ github.event.created_at }}
